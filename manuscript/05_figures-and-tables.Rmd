```{r setup-figures, include=FALSE}
source(here::here("setup.R"))
source_if_needed(
  output_path = here::here("figures/"), 
  source_path = here::here("figures/make-figures.R"),
  import = FALSE
)
```

# Tables {-}

```{r data-sources, results="asis"}
knitr::kable(
  read_csv(here::here("manuscript/data-sources.csv")), 
  caption = "(ref:data-sources)"
)
```

(ref:data-sources) Table: Data sources used in this study. Abbreviations are as follows:<!--TODO-->.

```{r species-model-table, results="asis"}
import_objects(here::here("outputs/06_species-turnover-and-richness/"))
tidy_terms <- c(
  "Intercept",
  "$log(\\overline{S_{QDS}} + 1)$",
  "$\\overline{J_{QDS}}$",
  "$SWA$",
  "$log(\\overline{S_{QDS}} + 1) \\times SWA$",
  "$\\overline{J_{QDS}} \\times SWA$"
)
out <- my_model_table(
  model = species_turnover_richness_HDS_m, 
  tidy_terms = tidy_terms,
  AIC_table = species_HDS_AIC_table
)
knitr::kable(
  out$model_table, 
  align = c("l", "r", "r"), 
  caption = "(ref:species-model-table)"
)
```

(ref:species-model-table) Estimated coefficients and significances ($P$-value) following multiple linear regression of HDS species richness ($S_{HDS}$) against the mean QDS species richness ($\overline{S_{QDS}}$) and turnover ($\overline{J_{QDS}}$; Jaccards distance) within a given HDS, of the form in Equation \@ref(eq:S-HDS-formula). The Cape was fit as the baseline, hence SWA represents the categorical term here. This was model was better fitting than a similar model without a region category ($\Delta AIC =$ `r out$deltaAIC`). Note, this model does not represent those curves plot in Figures \@ref(fig:richness-vs-turnover) and \@ref(fig:richness-vs-turnover-3QDS) (there, the curves are from simple linear regressions of the variables in each panel, separated by region).

# Figures {-}

```{r roughness, fig.cap="(ref:roughness)"}
knitr::include_graphics(here::here("figures/roughness.png"))
```

(ref:roughness) **A.B:** Violin-plots of the distribution of roughness values (Z-scaled) for nine environmental variables in the GCFR and SWAFR, presented at 0.05ยบ and 0.75ยบ (= 3QDS) square cell scales. Roughness values were calculated following Equation \@ref(eq:roughness). Points represent the median of each distribution. Violin-plots were constructed with Gaussian distributions on data, with bandwidth following Silverman's 'rule of thumb' [@Silverman1986]. Roughness values were found to be significantly greater in the GCFR in all cases ($P \lt 0.05$), unless marked as non-significant (NS), following Mann-Whitney $U$ tests. **C,D:** Scatter-plots of the size of the 95%-to-5% and 99%-to-1% interquantile ranges ($IQuR$) of Z-scaled roughness values (Equation \@ref(eq:roughness)) against spatial resolution (cells as 0.05ยบ to 0.75ยบ squares (=3QDS)), for the GCFR (red) and SWAFR (blue). Lines connect points for illustration.

```{r richness-vs-turnover, fig.cap="(ref:richness-vs-turnover)"}
knitr::include_graphics(here::here("figures/richness-vs-turnover.png"))
```

(ref:richness-vs-turnover) **A:** Scatter-plot of pairwise species turnover (as Jaccards distance) between QDS cells against the geographic distance (m) between them, from both regions (coloured as keyed). Species turnover was calculated for all possible pairs of cells, but only the turnover values for a random 5000 pairs in each region have been plotted, for clarity. Fitted lines represent the 5%-quantile regressions of turnover as a function of log-distance for each region. Following a single 5%-quantile regression of turnover as a function of $log$-distance with region as a categorical variable, a significant interaction between distance and region was found (Table \@ref(tab:turnover-vs-geodist-model-table), $P < 0.001$), such that the Cape positively impacted the distance slope term. **B:** Scatter-plots of HDS-scale species richness against the average QDS-scale richness in a given HDS, and **C:** the average species turnover (Jaccards distance) between QDS in a given HDS. Curves represent simples linear regressions of HDS richness against these two respective independent variables (note, mean QDS richness was $log(x + 1)$-transformed), separately for each region, for illustration of the two regions' differences.<!--TODO: add panel label C-->
